<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>سكيتال - تجربة التخمين</title>
<style>
/* الخطوط والخلفية */
body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #0d1b2a, #1b263b);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
}

/* العنوان */
h1 { 
    margin-bottom: 25px; 
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
}

/* التبويبات */
.tabs { 
    display: flex; 
    margin-bottom: 20px; 
}
.tab {
    padding: 12px 25px;
    background: rgba(255,255,255,0.15);
    margin: 0 5px;
    border-radius: 8px;
    cursor: not-allowed;
    opacity: 0.5;
    transition: 0.3s;
}
.tab.active { 
    background: #ff9800; 
    opacity: 1; 
    cursor: default; 
    box-shadow: 0 3px 6px rgba(0,0,0,0.3);
}

/* محتوى التبويب */
.content {
    background: rgba(255,255,255,0.05);
    padding: 25px;
    border-radius: 12px;
    width: 100%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

/* المدخلات والأزرار */
input {
    width: 80%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 8px;
    border: none;
    background: rgba(255,255,255,0.1);
    color: #fff;
    font-size: 16px;
}
input::placeholder { color: rgba(255,255,255,0.6); }

button {
    cursor: pointer;
    background-color: #ff9800;
    color: #fff;
    font-weight: bold;
    padding: 12px 20px;
    margin: 10px 0;
    border-radius: 8px;
    border: none;
    font-size: 16px;
    transition: 0.2s;
    box-shadow: 0 4px 6px rgba(0,0,0,0.3);
}
button:hover { 
    background-color: #e68900; 
    transform: translateY(-2px);
}

/* الناتج */
#guessOutput { 
    margin-top: 15px; 
    padding: 10px; 
    background: rgba(255,255,255,0.1); 
    border-radius:5px; 
    word-break: break-word;
}
</style>
</head>
<body>

<h1>تجربة سكيتال</h1>

<div class="tabs">
    <div class="tab active" id="tab1">إدخال الرسالة</div>
    <div class="tab" id="tab2">التخمين</div>
</div>

<!-- التبويب الأول: إدخال -->
<div class="content" id="content1">
    <p>أدخل الكلمة أو الجملة:</p>
    <input type="text" id="message" placeholder="مثال: مرحبا">
    <p>اختر قطر العصا (عدد الحروف لكل لفّة):</p>
    <input type="number" id="stickLength" min="2" max="20">
    <br>
    <button onclick="encryptAndSwitch()">تشفير وانتقال للتخمين</button>
</div>

<!-- التبويب الثاني: التخمين -->
<div class="content" id="content2" style="display:none;">
    <p>حاول تخمين طول العصا:</p>
    <input type="number" id="guessLength" min="2" max="20">
    <button onclick="guessMessage()">جرب التخمين</button>
    <div id="guessOutput"></div>
    <br>
    <button onclick="resetAll()">إعادة ضبط</button>
</div>

<script>
let originalMessage = "";
let stickLength = 5;
let encrypted = "";

function encryptAndSwitch() {
    originalMessage = document.getElementById("message").value.replace(/\s+/g, "");
    stickLength = parseInt(document.getElementById("stickLength").value);
    if(!originalMessage){ alert("ادخل كلمة أو جملة!"); return; }

    // تشفير الرسالة
    encrypted = "";
    for(let i = 0; i < stickLength; i++){
        for(let j = i; j < originalMessage.length; j += stickLength){
            encrypted += originalMessage[j];
        }
    }

    // الانتقال للتبويب الثاني
    document.getElementById("content1").style.display = "none";
    document.getElementById("content2").style.display = "block";
    document.getElementById("tab1").classList.remove("active");
    document.getElementById("tab2").classList.add("active");
    document.getElementById("guessOutput").innerText = "";
}

function guessMessage() {
    const guess = parseInt(document.getElementById("guessLength").value);
    if(guess === stickLength){
        // تظهر الرسالة فقط عند التخمين الصحيح
        let result = "";
        const rows = Math.ceil(encrypted.length / guess);
        for(let r = 0; r < rows; r++){
            for(let c = r; c < encrypted.length; c += rows){
                result += encrypted[c] ? encrypted[c] : "";
            }
        }
        document.getElementById("guessOutput").innerHTML = "<b>نجحت! الرسالة:</b> " + result;
    } else {
        document.getElementById("guessOutput").innerHTML = "<b>تخمين خاطئ</b> " +'<b>😡</b>';
    }
}

function resetAll() {
    encrypted = "";
    originalMessage = "";
    stickLength = 5;
    document.getElementById("message").value = "";
    document.getElementById("stickLength").value = 5;
    document.getElementById("guessLength").value = 5;
    document.getElementById("guessOutput").innerText = "";

    document.getElementById("content2").style.display = "none";
    document.getElementById("content1").style.display = "block";

    document.getElementById("tab2").classList.remove("active");
    document.getElementById("tab1").classList.add("active");
}
</script>

</body>
</html>
